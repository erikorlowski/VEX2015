#include "main.h"

struct Drive{

	PantherMotor frontLeft;
	PantherMotor	frontRight;
	PantherMotor rearLeft;
	PantherMotor rearRight;

}typedef Drive;

Drive initDrive(PantherMotor frontLeft, PantherMotor frontRight,
		PantherMotor rearLeft, PantherMotor rearRight)
{
	Drive newDrive = {frontLeft, frontRight, rearLeft, rearRight};

	return newDrive;
}

void holonomicDrive(Drive drive, int x, int y, int rotation)
{
	int frontLeft;
	int frontRight;
	int rearLeft;
	int rearRight;

	frontLeft = y - x + rotation;
	frontRight = y + x - rotation;
	rearLeft = y + x + rotation;
	rearRight = y - x - rotation;

	if(FRONT_LEFT_DRIVE_INVERTED) frontLeft *= -1;
	if(FRONT_RIGHT_DRIVE_INVERTED) frontRight *= -1;
	if(REAR_LEFT_DRIVE_INVERTED) rearLeft *= -1;
	if(REAR_RIGHT_DRIVE_INVERTED) rearRight *= -1;

	frontLeft = limit(frontLeft, 127, -127);
	frontRight = limit(frontRight, 127, -127);
	rearLeft = limit(rearLeft, 127, -127);
	rearRight = limit(rearRight, 127, -127);

	motorSet(FRONT_LEFT_DRIVE, frontLeft);
	motorSet(FRONT_RIGHT_DRIVE, frontRight);
	motorSet(REAR_LEFT_DRIVE, rearLeft);
	motorSet(REAR_RIGHT_DRIVE, rearRight);
}
