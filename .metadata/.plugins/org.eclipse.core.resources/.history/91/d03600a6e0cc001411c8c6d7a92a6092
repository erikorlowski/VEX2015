/*
 * DriveToWayPoint.c
 *
 *  Created on: Mar 15, 2015
 *      Author: Erik
 */

#include "main.h"

//TODO put DriveToWayPoint into main header file
#include "DriveToWayPoint.h"

DriveToWayPoint initDriveToWayPoint(Drive drive, double direction,
		double magnitude, int rotation, int maxSpeed)
{
	DriveToWayPoint newDriveToWayPoint = {drive, direction, magnitude,
			rotation, maxSpeed, 0.0};
	return newDriveToWayPoint;
}

void driveToWayPoint(DriveToWayPoint *stepInfo)
{
	if(autonomousInfo.lastStep != autonomousInfo.step)
	{
		imeReset((*stepInfo).drive.frontLeftIME);
		imeReset((*stepInfo).drive.frontRightIME);
		imeReset((*stepInfo).drive.rearLeftIME);
		imeReset((*stepInfo).drive.rearRightIME);

		(*stepInfo).gyroStart = gyroGet((*stepInfo).drive.gyro);
	}

	int directionRevs = holonomicInchesToIME((*stepInfo).direction, 4);
	int MagnitudeRevs = holonomicInchesToIME((*stepInfo).magnitude, 4);

	int directionPV = (imeGet((*stepInfo).drive.frontLeftIME) -
			imeGet((*stepInfo).drive.frontRightIME) -
			imeGet((*stepInfo).drive.rearLeftIME) +
			imeGet((*stepInfo).drive.rearRightIME))/4;
}
